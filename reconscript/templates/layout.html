<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>ReconScript Control Panel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body { font-family: system-ui, sans-serif; margin: 0; background: #101820; color: #f0f4f8; }
      header { padding: 1rem 2rem; background: #0b111a; display: flex; justify-content: space-between; align-items: center; }
      main { padding: 2rem; max-width: 960px; margin: 0 auto; }
      a { color: #5cc8ff; }
      .card { background: #151f2b; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.4); }
      .flash { padding: 0.75rem 1rem; border-radius: 6px; margin-bottom: 1rem; }
      .flash.error { background: #ff4d4d; color: #101820; }
      .flash.info { background: #275d9f; }
      label { display: block; margin-top: 1rem; font-weight: 600; }
      input, select, button { margin-top: 0.5rem; padding: 0.6rem; border-radius: 4px; border: 1px solid #223040; width: 100%; box-sizing: border-box; background: #0b121b; color: #f0f4f8; }
      button { cursor: pointer; background: #1e88e5; border: none; font-weight: 600; }
      button:disabled { opacity: 0.5; cursor: not-allowed; }
      .warning { background: #ffc107; color: #101820; padding: 0.5rem 1rem; border-radius: 4px; margin-bottom: 1rem; font-weight: 600; }
      nav a { margin-left: 1rem; }
    </style>
    <script defer src="{{ url_for('static', filename='js/consent.js') }}"></script>
  </head>
  <body>
    <header>
      <div>
        <strong>ReconScript</strong>
      </div>
      <nav>
        {% if current_user.is_authenticated %}
          <a href="{{ url_for('index') }}">Dashboard</a>
          <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
          <a href="{{ url_for('login') }}">Login</a>
        {% endif %}
      </nav>
    </header>
    <main>
      {% if public_ui %}
        <div class="warning">Public UI mode is enabled. Ensure authentication and TLS are enforced.</div>
      {% endif %}
      {% for category, message in get_flashed_messages(with_categories=true) %}
        <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
      {% block content %}{% endblock %}
    </main>
    {% include 'consent_modal.html' %}
  </body>
</html>
